<div class="page-header">
  <h1>New Crew</h1>
  <%= link_to "Back to Crews", crews_path, class: "btn" %>
</div>

<div class="form-container">
  <%= form_with model: @crew, local: true do |form| %>
    <% if @crew.errors.any? %>
      <div class="alert alert-error">
        <h4><%= pluralize(@crew.errors.count, "error") %> prohibited this crew from being saved:</h4>
        <ul>
          <% @crew.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= form.label :name, class: "form-label" %>
      <%= form.text_field :name, class: "form-input", required: true %>
    </div>

    <div class="form-group">
      <%= form.label :description, class: "form-label" %>
      <%= form.text_area :description, class: "form-input", rows: 3 %>
    </div>

    <div class="form-group">
      <%= form.label :process_type, class: "form-label" %>
      <%= form.select :process_type, 
          options_for_select([
            ['Sequential', 'sequential'],
            ['Hierarchical', 'hierarchical']
          ], @crew.process_type), 
          { prompt: 'Select process type' }, 
          { class: "form-select" } %>
    </div>

    <div class="form-group">
      <%= form.label :verbose, class: "form-label" %>
      <%= form.check_box :verbose, class: "form-checkbox" %>
      <span class="form-help">Enable verbose logging</span>
    </div>

    <div class="form-group">
      <%= form.label :memory_enabled, class: "form-label" %>
      <%= form.check_box :memory_enabled, class: "form-checkbox" %>
      <span class="form-help">Enable memory for agents</span>
    </div>

    <div class="form-group">
      <%= form.label :cache_enabled, class: "form-label" %>
      <%= form.check_box :cache_enabled, class: "form-checkbox" %>
      <span class="form-help">Enable caching</span>
    </div>

    <div class="form-group">
      <%= form.label :max_rpm, class: "form-label" %>
      <%= form.number_field :max_rpm, class: "form-input", min: 0 %>
      <span class="form-help">Maximum requests per minute (0 for unlimited)</span>
    </div>

    <div class="form-group">
      <%= form.label :manager_llm, class: "form-label" %>
      <%= form.text_field :manager_llm, class: "form-input" %>
      <span class="form-help">LLM configuration for the manager (JSON format)</span>
    </div>

    <div class="form-actions">
      <%= form.submit "Create Crew", class: "btn btn-primary" %>
      <%= link_to "Cancel", crews_path, class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>